<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor. 
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Change #{eventBean.getCurrentEvent().name} info</title>
        <h:outputStylesheet library="css" name="stylesheet.css" />
    </h:head>
    <h:body>
        <h1>MeteoCal</h1>
        <ul id="landmarks">
            <li><p:link outcome="home" value="#{userBean.name}'s Calendar"/></li>
            <li><p:link outcome="notifications" value="Notifications"/></li>
            <li><p:link outcome="addressbook" value="Addressbook"/></li>
            <li><p:link outcome="settings" value="Settings"/></li>
            <li><h:form><p:commandLink action="#{loginBean.logout()}" value="Logout"/></h:form></li>
        </ul>
        <h:form id="createeventform" class="clear-left">
            <p:panel header="Change Event Info Form"  visible="#{eventBean.isCreator()}">
                <p:panelGrid columns="3">
                    <p:outputLabel value="Event Name"/>
                    <p:inputText id="name" value="#{eventBean.getCurrentEvent().name}" 
                                 required="true">
                        <p:ajax update="namemsg"/>
                    </p:inputText>
                    <p:message id="namemsg" for="name" />
                    
                    <p:outputLabel value="Description"/>
                    <p:inputTextarea id="description" value="#{eventBean.getCurrentEvent().description}"
                                     rows="5" cols="30" counter="display" maxlength="100"
                                     counterTemplate="{0} characters remaining." autoResize="false" 
                                     required="true"/>
                    <h:outputText id="display" />
                    
                    <p:outputLabel value="Location, write &quot;address, city, state&quot;" />
                    <p:inputText id="location" value="#{eventBean.getCurrentEvent().location}"
                                 required="true">
                        <p:ajax update="locationmsg"/>
                    </p:inputText>
                    <p:message id="locationmsg" for="location" />
                    
                    <p:outputLabel value="Public"/>
                    <p:selectBooleanCheckbox value="#{eventBean.getCurrentEvent().pub}"/>
                    <p></p>
                    
                    <p:outputLabel value="Begin time"/>
                    <p:calendar id="beginTime" value="#{eventBean.getCurrentEvent().beginTime}"
                                pages="3" effect="fold" mindate="#{scheduleBean.today()}"
                                pattern="dd/MM/yyyy HH:mm">
                        <p:ajax update="beginTimemsg"/>
                    </p:calendar>
                    <p:message id="beginTimemsg" for="beginTime" />
                    
                    
                    <p:outputLabel value="End time"/>
                    <p:calendar id="endTime" value="#{eventBean.getCurrentEvent().endTime}"
                                pages="3" effect="fold" mindate="#{scheduleBean.today()}"
                                pattern="dd/MM/yyyy HH:mm">
                    </p:calendar>
                    <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
                    
                    <p>Insert email of invited users separated by ";"</p>
                    <p:inputTextarea value="#{eventBean.invites}" rows="10" cols="50"
                                     completeMethod="#{eventBean.complete}"
                                     queryDelay="500" minQueryLength="2"/>
 
                    
                    <p:commandButton id="submit" value="save Event" update="@all" ajax="true"
                                    action="#{eventBean.saveEvent()}" />
                   </p:panelGrid>
            </p:panel>
        </h:form>
    </h:body>
</html>
